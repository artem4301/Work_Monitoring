# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–¢–µ–ø–µ—Ä—å —Ç–∞–π–º–µ—Ä —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–∫–∏–¥–∞–µ—Ç —Ä–∞–±–æ—á—É—é –∑–æ–Ω—É, –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### üö´ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞
- –ü—Ä–∏ **–≤—ã—Ö–æ–¥–µ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã** —Å–º–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ü—Ä–∏—á–∏–Ω–∞ –ø–∞—É–∑—ã: "–í—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã"
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–°–º–µ–Ω–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: –≤—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã"
- –¢–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "(–ü–ê–£–ó–ê)"

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ü—Ä–∏ **–≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –≤ —Ä–∞–±–æ—á—É—é –∑–æ–Ω—É** —Å–º–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –£—Å–ª–æ–≤–∏–µ: —Å–º–µ–Ω–∞ –±—ã–ª–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–º–µ–Ω–Ω–æ –ø–æ –ø—Ä–∏—á–∏–Ω–µ "–í—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã"
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–°–º–µ–Ω–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞: –≤–æ–∑–≤—Ä–∞—Ç –≤ —Ä–∞–±–æ—á—É—é –∑–æ–Ω—É"
- –¢–∞–π–º–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç—Å—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–æ–Ω—ã
```kotlin
private var wasInZone = true // –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å
private var pauseStartTime: Long = 0L

private fun handleZoneStatusChange(userId: String, currentlyInZone: Boolean, currentlyPaused: Boolean) {
    if (wasInZone != currentlyInZone) {
        if (!currentlyInZone && !currentlyPaused) {
            // –í—ã—à–µ–ª –∏–∑ –∑–æ–Ω—ã - –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
            repository.pauseShift(userId, "–í—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã")
        } else if (currentlyInZone && currentlyPaused) {
            // –í–µ—Ä–Ω—É–ª—Å—è –≤ –∑–æ–Ω—É - –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º (–µ—Å–ª–∏ –ø–∞—É–∑–∞ –±—ã–ª–∞ –∏–∑-–∑–∞ –≤—ã—Ö–æ–¥–∞)
            if (user?.pauseReason == "–í—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã") {
                repository.resumeShift(userId)
            }
        }
        wasInZone = currentlyInZone
    }
}
```

### –¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
```kotlin
private fun updateTimer() {
    // –£—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–∞—É–∑—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    val currentPauseDuration = if (isShiftPaused && pauseStartTime > 0L) {
        totalPauseDuration + (currentTime - pauseStartTime)
    } else {
        totalPauseDuration
    }
    
    val workingTime = maxOf(0L, elapsedTime - currentPauseDuration)
    // ... —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
}
```

## –°—Ç–∞—Ç—É—Å—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

| –°–∏—Ç—É–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –¢–∞–π–º–µ—Ä |
|----------|--------|--------|
| –í —Ä–∞–±–æ—á–µ–π –∑–æ–Ω–µ | "–í —Ä–∞–±–æ—á–µ–π –∑–æ–Ω–µ" | –ò–¥–µ—Ç |
| –í–Ω–µ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã | "–°–º–µ–Ω–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: –í—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã" | –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ü–ê–£–ó–ê) |
| –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è | "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è" | –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ü–ê–£–ó–ê) |
| –î—Ä—É–≥–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø–∞—É–∑—ã | "–°–º–µ–Ω–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: [–ø—Ä–∏—á–∏–Ω–∞]" | –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ü–ê–£–ó–ê) |

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–¢–æ—á–Ω—ã–π —É—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏** - –≤—Ä–µ–º—è –≤–Ω–µ –∑–æ–Ω—ã –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å** - –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º—è –≤ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω–µ
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–º–µ–Ω—ã
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - —Ä–∞–∑–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–∞—É–∑ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `WorkTimeActivity` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–æ–Ω—ã
- –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å (`wasInZone`) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
- –¢–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —Å —É—á–µ—Ç–æ–º —Ç–µ–∫—É—â–µ–π –ø–∞—É–∑—ã
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—É–∑–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–∞—É–∑—ã –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º
- –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–∞—É–∑ "–í—ã—Ö–æ–¥ –∏–∑ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã"
- –†—É—á–Ω—ã–µ –ø–∞—É–∑—ã –∏ –ø–∞—É–∑—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ 